<div class="jumbotron">

  <div class="container">
      <div class="row">
          <div class="col-md-15col-md-offset-1">
              <div class="login-panel panel panel-default">
                  <div class="panel-heading">
                      <h3 class="panel-title">Users</h3>
                  </div>
                  <div class="panel-body">

<div>
  <button type="button" ng-hide="showAddEditUser" ng-click="show()" class="btn  btn-primary  btn-lg  aw-btn-full-width">
    New User
  </button>

  <form ng-submit="saveUser(user)" ng-hide="!showAddEditUser" name="form" role="form">




      <center  ><img ng-src="{{user.mimeType}},{{user.file}}" width="70" class="img-circle img80_80" /></center>


                      Avatar
           <br />
             <!--id="myFile"--> <!--ng-hide="showAddEditformulario" ng-click="show()"-->
                <input   type="file" class="btn btn-danger btn-xs"   ng-model="user.file" accept="image/*"
                   multiple app-filereader ng-change="updateLinkImage(user.file[0])" />

                <br />


                <div>
                  <label>Apartamentos</label>
                  <div >
                    <select  ng-model="user.userid.id">
                       <option ng-repeat="user_id in user_ids" value="{{user_id.id}}">{{user_id.descricao}}</option>
                     </select>
                  </div>
                </div>



   <div class="form-group">
      <label>Name</label>
      <input class="form-control" type="text" placeholder="Name" ng-model="user.name" minlength="4" maxlength="120" required>
    </div>


    <div ng-show="form.email.$dirty" >
         <div  ng-show="form.email.$error.required" class="alert alert-danger" role="alert">Campo Email é obrigatório </div>
            <div  ng-show="form.email.$error.email" class="alert alert-danger" role="alert">Email inválido </div>


    </div>




    <div class="form-group input-group">
                                    <span class="input-group-addon">@</span>
      <div class="form-group" ng-class="{'has-error': form.email.$invalid ,'has-success': form.email.$valid}">

      <input for="email" name="email"  type="email" class="form-control"   type="email" placeholder="Email" ng-model="user.email"
       autofocus required >
     </div>
    </div>

     <div class="form-group">
      <label>Password</label>
      <input class="form-control" type="password" placeholder="Password" ng-model="user.password" minlength="4" maxlength="30" required>
    </div>

   <div class="form-group">
      <label>Permissions</label>
      <div ng-repeat="permission in permissions">
        <input  id="{{permission.role}}" type="checkbox" checklist-model="user.permissions" checklist-value="permission">
        <label for="{{permission.role}}">{{permission.role | formatPermission}}</label>
      </div>
    </div>





    <button  ng-disabled="form.$invalid"  class="btn btn-success btn-s"   type="submit">
           <span class="glyphicon glyphicon-upload"></span> Salvar </button>
                 <button type="reset"  class="btn btn-danger btn-s">
              <span class="glyphicon glyphicon-trash"></span>Limpar Nome</button>
        <button type="button" value="Voltar" onClick="history.go(-1)" class="btn btn-danger btn-s">Voltar </button>
          <button type="button" class="btn btn-success btn-s"  ng-click="hide()">Cancel</button>

  </form>
<br><br>
  <div class="row">
                    <div class="col-lg-100">
                      <div class="table-responsive">
                                             <table class="table table-bordered table-hover table-striped">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>File</th>
          <th>Setor </th>
          <th>Permissions</th>
          <th>Editar </th>
          <th>Deletar</th>


        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="user in users" class="active">
          <td>{{ user.name }}</td>
          <td>{{ user.email }}</td>
        <td>  <img ng-src="{{user.mimeType}},{{user.file}}" width="50" /> </td>
        <td>{{ user.userid.descricao }}</td>
          <td>
            <div ng-repeat="permission in user.permissions">{{ permission.role | formatPermission}}</div>
          </td>


          <td><button ng-click="editUser(user)" class="btn btn-success btn-s"><span class="glyphicon glyphicon-ok"></span></button></td>
          <td><button ng-click="deleteUser(user)" class="btn btn-danger btn-s"><span class="glyphicon glyphicon-trash"></span></button></td>

        </tr>
      </tbody>
    </table>
  </div>
</div>
</div>
</div>
</div>
